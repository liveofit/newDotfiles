- hosts: localhost
  become: yes
  remote_user: liveofit
  environment:
    HOME: "/home/{{ ansible_user }}"
  pre_tasks:
    - name: Update Apt
      apt:
        update_cache: true
        state: present
      when: ansible_distribution == 'Debian' or ansible_distribution == 'Ubuntu'
  tasks:
    - include: tasks/apt.yml
      when: ansible_distribution == 'Debian' or ansible_distribution == 'Ubuntu'
    - include: tasks/brew.yml
      when: ansible_distribution == 'MacOSX'
    - include: tasks/cask.yml
      when: ansible_distribution == 'MacOSX'
    - include: tasks/custom-installations.yml
    - include: tasks/node.yml
    - include: tasks/python.yml
    - include: tasks/cargo.yml
    - include: tasks/zsh-setup.yml
    - include: tasks/dotfiles.yml
    - name: change user shell to zsh
      become: yes
      user:
        name: "{{ ansible_user }}"
        shell: /usr/bin/zsh
